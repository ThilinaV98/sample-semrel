name: ðŸ¦¸ Super-Linter

# Trigger on multiple events according to branching strategy
on:
  push:
    branches: [main, dev]
  pull_request:
    branches: [main, dev]
    types: [opened, synchronize, reopened]
  workflow_dispatch:

# Permissions for GITHUB_TOKEN
permissions:
  contents: read
  packages: read
  statuses: write

jobs:
  super-linter:
    name: ðŸ¦¸ Lint Codebase
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ðŸ¦¸ Run Super-Linter
        uses: github/super-linter@v5
        env:
          # Default branch configuration
          DEFAULT_BRANCH: main
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
          # Linting configuration - only enable specific linters
          VALIDATE_ALL_CODEBASE: false
          
          # Explicitly enable only these linters
          VALIDATE_JSON: true
          VALIDATE_YAML: true
          VALIDATE_MARKDOWN: true
          VALIDATE_GITHUB_ACTIONS: true
          VALIDATE_BASH: false  # Disable to avoid shellcheck warnings for now
          
          # Explicitly disable JavaScript/TypeScript linting - we run ESLint separately
          VALIDATE_JAVASCRIPT_ES: false
          VALIDATE_JAVASCRIPT_STANDARD: false
          VALIDATE_TYPESCRIPT_ES: false
          VALIDATE_TYPESCRIPT_STANDARD: false
          VALIDATE_JSX: false
          VALIDATE_TSX: false
          
          # Super-Linter settings
          LOG_LEVEL: WARN
          CREATE_LOG_FILE: true
          SUPPRESS_POSSUM: true
          
          # Filter out certain file patterns
          FILTER_REGEX_EXCLUDE: "node_modules/.*|coverage/.*|dist/.*|\\.git/.*"

      - name: ðŸ“Š Upload Super-Linter Results
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: super-linter-results
          path: super-linter.log
          retention-days: 30